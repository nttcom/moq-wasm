(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))n(_);new MutationObserver(_=>{for(const o of _)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(_){const o={};return _.integrity&&(o.integrity=_.integrity),_.referrerPolicy&&(o.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?o.credentials="include":_.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(_){if(_.ep)return;_.ep=!0;const o=t(_);fetch(_.href,o)}})();class C{static __wrap(e){e=e>>>0;const t=Object.create(C.prototype);return t.__wbg_ptr=e,V.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,V.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_announceerrormessage_free(e,0)}get errorCode(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get reasonPhrase(){let e,t;try{const n=r.announceerrormessage_reasonPhrase(this.__wbg_ptr);return e=n[0],t=n[1],l(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}get trackNamespace(){const e=r.announceerrormessage_trackNamespace(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(C.prototype[Symbol.dispose]=C.prototype.free);class M{static __wrap(e){e=e>>>0;const t=Object.create(M.prototype);return t.__wbg_ptr=e,Q.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Q.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_announcemessage_free(e,0)}get trackNamespace(){const e=r.announcemessage_trackNamespace(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(M.prototype[Symbol.dispose]=M.prototype.free);class A{static __wrap(e){e=e>>>0;const t=Object.create(A.prototype);return t.__wbg_ptr=e,J.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,J.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_announceokmessage_free(e,0)}get trackNamespace(){const e=r.announceokmessage_trackNamespace(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(A.prototype[Symbol.dispose]=A.prototype.free);class W{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,K.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_moqtclient_free(e,0)}get id(){const e=r.__wbg_get_moqtclient_id(this.__wbg_ptr);return BigInt.asUintN(64,e)}array_buffer_sample_method(e){const t=E(e,r.__wbindgen_malloc),n=a;r.moqtclient_array_buffer_sample_method(this.__wbg_ptr,t,n)}close(){return r.moqtclient_close(this.__wbg_ptr)}getSubgroupState(e){const t=r.moqtclient_getSubgroupState(this.__wbg_ptr,e);return v.__wrap(t)}getTrackSubscribers(e,t){const n=p(e,r.__wbindgen_malloc),_=a,o=g(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=a,c=r.moqtclient_getTrackSubscribers(this.__wbg_ptr,n,_,o,i);var u=we(c[0],c[1]).slice();return r.__wbindgen_free(c[0],c[1]*8,8),u}incrementSubgroupObject(e){r.moqtclient_incrementSubgroupObject(this.__wbg_ptr,e)}isConnected(){return r.moqtclient_isConnected(this.__wbg_ptr)!==0}isSubscribed(e){return r.moqtclient_isSubscribed(this.__wbg_ptr,e)!==0}markSubgroupHeaderSent(e){r.moqtclient_markSubgroupHeaderSent(this.__wbg_ptr,e)}constructor(e){const t=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=a,_=r.moqtclient_new(t,n);return this.__wbg_ptr=_>>>0,K.register(this,this.__wbg_ptr,this),this}onAnnounce(e){r.moqtclient_onAnnounce(this.__wbg_ptr,e)}onAnnounceResponse(e){r.moqtclient_onAnnounceResponse(this.__wbg_ptr,e)}onConnectionClosed(e){r.moqtclient_onConnectionClosed(this.__wbg_ptr,e)}onDatagramObject(e){r.moqtclient_onDatagramObject(this.__wbg_ptr,e)}onDatagramObjectStatus(e){r.moqtclient_onDatagramObjectStatus(this.__wbg_ptr,e)}onSetup(e){r.moqtclient_onSetup(this.__wbg_ptr,e)}onSubgroupStreamHeader(e){r.moqtclient_onSubgroupStreamHeader(this.__wbg_ptr,e)}onSubgroupStreamObject(e){r.moqtclient_onSubgroupStreamObject(this.__wbg_ptr,e)}onSubscribe(e){r.moqtclient_onSubscribe(this.__wbg_ptr,e)}onSubscribeAnnouncesResponse(e){r.moqtclient_onSubscribeAnnouncesResponse(this.__wbg_ptr,e)}onSubscribeResponse(e){r.moqtclient_onSubscribeResponse(this.__wbg_ptr,e)}onUnsubscribe(e){r.moqtclient_onUnsubscribe(this.__wbg_ptr,e)}resetSubgroupState(e){r.moqtclient_resetSubgroupState(this.__wbg_ptr,e)}sendAnnounceMessage(e,t){const n=p(e,r.__wbindgen_malloc),_=a,o=g(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=a;return r.moqtclient_sendAnnounceMessage(this.__wbg_ptr,n,_,o,i)}sendAnnounceOkMessage(e){const t=p(e,r.__wbindgen_malloc),n=a;return r.moqtclient_sendAnnounceOkMessage(this.__wbg_ptr,t,n)}sendDatagramObject(e,t,n,_,o){const i=E(o,r.__wbindgen_malloc),c=a;return r.moqtclient_sendDatagramObject(this.__wbg_ptr,e,t,n,_,i,c)}sendDatagramObjectStatus(e,t,n,_,o){return r.moqtclient_sendDatagramObjectStatus(this.__wbg_ptr,e,t,n,_,o)}sendSetupMessage(e,t){const n=me(e,r.__wbindgen_malloc),_=a;return r.moqtclient_sendSetupMessage(this.__wbg_ptr,n,_,t)}sendSubgroupStreamHeaderMessage(e,t,n,_){return r.moqtclient_sendSubgroupStreamHeaderMessage(this.__wbg_ptr,e,t,n,_)}sendSubgroupStreamObject(e,t,n,_,o,i,c){const u=E(i,r.__wbindgen_malloc),S=a;return r.moqtclient_sendSubgroupStreamObject(this.__wbg_ptr,e,t,n,_,d(o)?16777215:o,u,S,c)}sendSubscribeAnnouncesMessage(e,t){const n=p(e,r.__wbindgen_malloc),_=a,o=g(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=a;return r.moqtclient_sendSubscribeAnnouncesMessage(this.__wbg_ptr,n,_,o,i)}sendSubscribeErrorMessage(e,t,n){const _=g(n,r.__wbindgen_malloc,r.__wbindgen_realloc),o=a;return r.moqtclient_sendSubscribeErrorMessage(this.__wbg_ptr,e,t,_,o)}sendSubscribeMessage(e,t,n,_,o,i,c,u,S,T,$){const G=p(n,r.__wbindgen_malloc),ce=a,ae=g(_,r.__wbindgen_malloc,r.__wbindgen_realloc),ue=a,be=g($,r.__wbindgen_malloc,r.__wbindgen_realloc),ge=a;return r.moqtclient_sendSubscribeMessage(this.__wbg_ptr,e,t,G,ce,ae,ue,o,i,c,u,S,T,be,ge)}sendSubscribeOkMessage(e,t,n,_){const o=g(n,r.__wbindgen_malloc,r.__wbindgen_realloc),i=a,c=g(_,r.__wbindgen_malloc,r.__wbindgen_realloc),u=a;return r.moqtclient_sendSubscribeOkMessage(this.__wbg_ptr,e,t,o,i,c,u)}sendUnannounceMessage(e){const t=p(e,r.__wbindgen_malloc),n=a;return r.moqtclient_sendUnannounceMessage(this.__wbg_ptr,t,n)}sendUnsubscribeMessage(e){return r.moqtclient_sendUnsubscribeMessage(this.__wbg_ptr,e)}start(){return r.moqtclient_start(this.__wbg_ptr)}url(){return r.moqtclient_url(this.__wbg_ptr)}set id(e){r.__wbg_set_moqtclient_id(this.__wbg_ptr,e)}}Symbol.dispose&&(W.prototype[Symbol.dispose]=W.prototype.free);class I{static __wrap(e){e=e>>>0;const t=Object.create(I.prototype);return t.__wbg_ptr=e,X.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,X.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_serversetupmessage_free(e,0)}get version(){return r.serversetupmessage_version(this.__wbg_ptr)>>>0}}Symbol.dispose&&(I.prototype[Symbol.dispose]=I.prototype.free);class v{static __wrap(e){e=e>>>0;const t=Object.create(v.prototype);return t.__wbg_ptr=e,Y.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Y.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subgroupstate_free(e,0)}get groupId(){const e=r.subgroupstate_groupId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get headerSent(){return r.subgroupstate_headerSent(this.__wbg_ptr)!==0}get objectId(){const e=r.subgroupstate_objectId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get subgroupId(){const e=r.subgroupstate_subgroupId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get trackAlias(){const e=r.subgroupstate_trackAlias(this.__wbg_ptr);return BigInt.asUintN(64,e)}}Symbol.dispose&&(v.prototype[Symbol.dispose]=v.prototype.free);class R{static __wrap(e){e=e>>>0;const t=Object.create(R.prototype);return t.__wbg_ptr=e,Z.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Z.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subgroupstreamobjectmessage_free(e,0)}get locHeader(){const e=r.subgroupstreamobjectmessage_locHeader(this.__wbg_ptr);if(e[2])throw B(e[1]);return B(e[0])}get objectId(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get objectPayload(){const e=r.subgroupstreamobjectmessage_objectPayload(this.__wbg_ptr);var t=L(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*1,1),t}get objectPayloadLength(){return r.subgroupstreamobjectmessage_objectPayloadLength(this.__wbg_ptr)>>>0}get objectStatus(){const e=r.subgroupstreamobjectmessage_objectStatus(this.__wbg_ptr);return e===16777215?void 0:e}}Symbol.dispose&&(R.prototype[Symbol.dispose]=R.prototype.free);class q{static __wrap(e){e=e>>>0;const t=Object.create(q.prototype);return t.__wbg_ptr=e,ee.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ee.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribeannounceserrormessage_free(e,0)}get errorCode(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get reasonPhrase(){let e,t;try{const n=r.subscribeannounceserrormessage_reasonPhrase(this.__wbg_ptr);return e=n[0],t=n[1],l(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}get trackNamespacePrefix(){const e=r.subscribeannounceserrormessage_trackNamespacePrefix(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(q.prototype[Symbol.dispose]=q.prototype.free);class k{static __wrap(e){e=e>>>0;const t=Object.create(k.prototype);return t.__wbg_ptr=e,te.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,te.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribeannouncesokmessage_free(e,0)}get trackNamespacePrefix(){const e=r.subscribeannouncesokmessage_trackNamespacePrefix(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(k.prototype[Symbol.dispose]=k.prototype.free);class H{static __wrap(e){e=e>>>0;const t=Object.create(H.prototype);return t.__wbg_ptr=e,ne.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ne.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribedonemessage_free(e,0)}get contentExists(){return r.subscribedonemessage_contentExists(this.__wbg_ptr)!==0}get finalGroupId(){const e=r.subscribedonemessage_finalGroupId(this.__wbg_ptr);return e[0]===0?void 0:BigInt.asUintN(64,e[1])}get finalObjectId(){const e=r.subscribedonemessage_finalObjectId(this.__wbg_ptr);return e[0]===0?void 0:BigInt.asUintN(64,e[1])}get reasonPhrase(){let e,t;try{const n=r.subscribedonemessage_reasonPhrase(this.__wbg_ptr);return e=n[0],t=n[1],l(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}get statusCode(){const e=r.subscribedonemessage_statusCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get subscribeId(){const e=r.subscribedonemessage_subscribeId(this.__wbg_ptr);return BigInt.asUintN(64,e)}}Symbol.dispose&&(H.prototype[Symbol.dispose]=H.prototype.free);class U{static __wrap(e){e=e>>>0;const t=Object.create(U.prototype);return t.__wbg_ptr=e,re.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,re.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribeerrormessage_free(e,0)}get errorCode(){const e=r.subscribeerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get reasonPhrase(){let e,t;try{const n=r.subscribeerrormessage_reasonPhrase(this.__wbg_ptr);return e=n[0],t=n[1],l(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}get subscribeId(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}}Symbol.dispose&&(U.prototype[Symbol.dispose]=U.prototype.free);class z{static __wrap(e){e=e>>>0;const t=Object.create(z.prototype);return t.__wbg_ptr=e,se.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,se.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribemessage_free(e,0)}get subscribeId(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get trackAlias(){const e=r.subscribeerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}get trackName(){let e,t;try{const n=r.subscribemessage_trackName(this.__wbg_ptr);return e=n[0],t=n[1],l(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}get trackNamespace(){const e=r.subscribemessage_trackNamespace(this.__wbg_ptr);var t=y(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}}Symbol.dispose&&(z.prototype[Symbol.dispose]=z.prototype.free);class N{static __wrap(e){e=e>>>0;const t=Object.create(N.prototype);return t.__wbg_ptr=e,_e.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,_e.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_subscribeokmessage_free(e,0)}get subscribeId(){const e=r.announceerrormessage_errorCode(this.__wbg_ptr);return BigInt.asUintN(64,e)}}Symbol.dispose&&(N.prototype[Symbol.dispose]=N.prototype.free);function Ae(s){const e=g(s,r.__wbindgen_malloc,r.__wbindgen_realloc),t=a,n=r.parse_msf_catalog_json(e,t);if(n[2])throw B(n[1]);return B(n[0])}function le(){return{__proto__:null,"./moqt_client_wasm_bg.js":{__proto__:null,__wbg_Error_8c4e43fe74559d73:function(e,t){return Error(l(e,t))},__wbg_Number_04624de7d0e8332d:function(e){return Number(e)},__wbg_String_8f0eb39a4a4c2f66:function(e,t){const n=String(t),_=g(n,r.__wbindgen_malloc,r.__wbindgen_realloc),o=a;b().setInt32(e+4,o,!0),b().setInt32(e+0,_,!0)},__wbg___wbindgen_bigint_get_as_i64_8fcf4ce7f1ca72a2:function(e,t){const n=t,_=typeof n=="bigint"?n:void 0;b().setBigInt64(e+8,d(_)?BigInt(0):_,!0),b().setInt32(e+0,!d(_),!0)},__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:function(e){const t=e,n=typeof t=="boolean"?t:void 0;return d(n)?16777215:n?1:0},__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(e,t){const n=D(t),_=g(n,r.__wbindgen_malloc,r.__wbindgen_realloc),o=a;b().setInt32(e+4,o,!0),b().setInt32(e+0,_,!0)},__wbg___wbindgen_in_47fa6863be6f2f25:function(e,t){return e in t},__wbg___wbindgen_is_bigint_31b12575b56f32fc:function(e){return typeof e=="bigint"},__wbg___wbindgen_is_function_0095a73b8b156f76:function(e){return typeof e=="function"},__wbg___wbindgen_is_null_ac34f5003991759a:function(e){return e===null},__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:function(e){const t=e;return typeof t=="object"&&t!==null},__wbg___wbindgen_is_string_cd444516edc5b180:function(e){return typeof e=="string"},__wbg___wbindgen_is_undefined_9e4d92534c42d778:function(e){return e===void 0},__wbg___wbindgen_jsval_eq_11888390b0186270:function(e,t){return e===t},__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:function(e,t){return e==t},__wbg___wbindgen_number_get_8ff4255516ccad3e:function(e,t){const n=t,_=typeof n=="number"?n:void 0;b().setFloat64(e+8,d(_)?0:_,!0),b().setInt32(e+0,!d(_),!0)},__wbg___wbindgen_string_get_72fb696202c56729:function(e,t){const n=t,_=typeof n=="string"?n:void 0;var o=d(_)?0:g(_,r.__wbindgen_malloc,r.__wbindgen_realloc),i=a;b().setInt32(e+4,i,!0),b().setInt32(e+0,o,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(e,t){throw new Error(l(e,t))},__wbg__wbg_cb_unref_d9b87ff7982e3b21:function(e){e._wbg_cb_unref()},__wbg_announceerrormessage_new:function(e){return C.__wrap(e)},__wbg_announcemessage_new:function(e){return M.__wrap(e)},__wbg_announceokmessage_new:function(e){return A.__wrap(e)},__wbg_call_389efe28435a9388:function(){return f(function(e,t){return e.call(t)},arguments)},__wbg_call_4708e0c13bdc8e95:function(){return f(function(e,t,n){return e.call(t,n)},arguments)},__wbg_call_e8c868596c950cf6:function(){return f(function(e,t,n,_,o){return e.call(t,n,_,o)},arguments)},__wbg_cancel_2c0a0a251ff6b2b7:function(e){return e.cancel()},__wbg_close_023f23e40c08de17:function(e){return e.close()},__wbg_close_3a05e435dc0b2598:function(e){e.close()},__wbg_closed_5cf2eea36a097ef5:function(e){return e.closed},__wbg_createBidirectionalStream_78addf4ad76650da:function(e){return e.createBidirectionalStream()},__wbg_createUnidirectionalStream_6102f89c2c7b570b:function(e){return e.createUnidirectionalStream()},__wbg_datagrams_e8ecf758085f68d3:function(e){return e.datagrams},__wbg_done_57b39ecd9addfe81:function(e){return e.done},__wbg_entries_58c7934c745daac7:function(e){return Object.entries(e)},__wbg_error_7534b8e9a36f1ab4:function(e,t){let n,_;try{n=e,_=t,console.error(l(e,t))}finally{r.__wbindgen_free(n,_,1)}},__wbg_getWriter_4bd085da387cdc1a:function(){return f(function(e){return e.getWriter()},arguments)},__wbg_get_9b94d73e6221f75c:function(e,t){return e[t>>>0]},__wbg_get_b3ed3ad4be2bc8ac:function(){return f(function(e,t){return Reflect.get(e,t)},arguments)},__wbg_get_with_ref_key_1dc361bd10053bfe:function(e,t){return e[t]},__wbg_incomingUnidirectionalStreams_77455b790cef8694:function(e){return e.incomingUnidirectionalStreams},__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:function(e){let t;try{t=e instanceof ArrayBuffer}catch{t=!1}return t},__wbg_instanceof_Map_53af74335dec57f4:function(e){let t;try{t=e instanceof Map}catch{t=!1}return t},__wbg_instanceof_Uint8Array_9b9075935c74707c:function(e){let t;try{t=e instanceof Uint8Array}catch{t=!1}return t},__wbg_isArray_d314bb98fcf08331:function(e){return Array.isArray(e)},__wbg_isSafeInteger_bfbc7332a9768d2a:function(e){return Number.isSafeInteger(e)},__wbg_iterator_6ff6560ca1568e55:function(){return Symbol.iterator},__wbg_length_32ed9a279acd054c:function(e){return e.length},__wbg_length_35a7bace40f36eac:function(e){return e.length},__wbg_log_1bcc9edfa6910ea5:function(e,t){console.log(l(e,t))},__wbg_new_322cf0319badd6be:function(){return f(function(e,t){return new WebTransport(l(e,t))},arguments)},__wbg_new_361308b2356cecd0:function(){return new Object},__wbg_new_3eb36ae241fe6f44:function(){return new Array},__wbg_new_3ecd509f06237282:function(){return f(function(e){return new ReadableStreamDefaultReader(e)},arguments)},__wbg_new_72b49615380db768:function(e,t){return new Error(l(e,t))},__wbg_new_8a6f238a6ece86ea:function(){return new Error},__wbg_new_b5d9e2fb389fef91:function(e,t){try{var n={a:e,b:t},_=(i,c)=>{const u=n.a;n.a=0;try{return fe(u,n.b,i,c)}finally{n.a=u}};return new Promise(_)}finally{n.a=n.b=0}},__wbg_new_dd2b680c8bf6ae29:function(e){return new Uint8Array(e)},__wbg_new_no_args_1c7c842f08d00ebb:function(e,t){return new Function(l(e,t))},__wbg_new_with_length_a2c39cbe88fd8ff1:function(e){return new Uint8Array(e>>>0)},__wbg_next_3482f54c49e8af19:function(){return f(function(e){return e.next()},arguments)},__wbg_next_418f80d8f5303233:function(e){return e.next},__wbg_prototypesetcall_bdcdcc5842e4d77d:function(e,t,n){Uint8Array.prototype.set.call(L(e,t),n)},__wbg_queueMicrotask_0aa0a927f78f5d98:function(e){return e.queueMicrotask},__wbg_queueMicrotask_5bb536982f78a56f:function(e){queueMicrotask(e)},__wbg_read_68fd377df67e19b0:function(e){return e.read()},__wbg_readable_041a926fc833b5b0:function(e){return e.readable},__wbg_readable_5926ce71060efcbf:function(e){return e.readable},__wbg_ready_b3a3788d1db0456b:function(e){return e.ready},__wbg_resolve_002c4b7d9d8f6b64:function(e){return Promise.resolve(e)},__wbg_serversetupmessage_new:function(e){return I.__wrap(e)},__wbg_set_3f1d0b984ed272ed:function(e,t,n){e[t]=n},__wbg_set_cc56eefd2dd91957:function(e,t,n){e.set(L(t,n))},__wbg_set_f43e577aea94465b:function(e,t,n){e[t>>>0]=n},__wbg_stack_0ed75d68575b0f3c:function(e,t){const n=t.stack,_=g(n,r.__wbindgen_malloc,r.__wbindgen_realloc),o=a;b().setInt32(e+4,o,!0),b().setInt32(e+0,_,!0)},__wbg_static_accessor_GLOBAL_12837167ad935116:function(){const e=typeof global>"u"?null:global;return d(e)?0:m(e)},__wbg_static_accessor_GLOBAL_THIS_e628e89ab3b1c95f:function(){const e=typeof globalThis>"u"?null:globalThis;return d(e)?0:m(e)},__wbg_static_accessor_SELF_a621d3dfbb60d0ce:function(){const e=typeof self>"u"?null:self;return d(e)?0:m(e)},__wbg_static_accessor_WINDOW_f8727f0cf888e0bd:function(){const e=typeof window>"u"?null:window;return d(e)?0:m(e)},__wbg_subgroupstreamobjectmessage_new:function(e){return R.__wrap(e)},__wbg_subscribeannounceserrormessage_new:function(e){return q.__wrap(e)},__wbg_subscribeannouncesokmessage_new:function(e){return k.__wrap(e)},__wbg_subscribedonemessage_new:function(e){return H.__wrap(e)},__wbg_subscribeerrormessage_new:function(e){return U.__wrap(e)},__wbg_subscribemessage_new:function(e){return z.__wrap(e)},__wbg_subscribeokmessage_new:function(e){return N.__wrap(e)},__wbg_then_0d9fe2c7b1857d32:function(e,t,n){return e.then(t,n)},__wbg_then_b9e7b3b5f1a9e1b5:function(e,t){return e.then(t)},__wbg_valueOf_4f1aacd209b8b72b:function(e){return e.valueOf()},__wbg_value_0546255b415e96c1:function(e){return e.value},__wbg_writable_9bd9c220811c18a3:function(e){return e.writable},__wbg_writable_f7ffad491b3d19bc:function(e){return e.writable},__wbg_write_4dbba5e5426abaf4:function(e,t){return e.write(t)},__wbindgen_cast_0000000000000001:function(e,t){return pe(e,t,r.wasm_bindgen__closure__destroy__h6c6c961c1bcf5ced,de)},__wbindgen_cast_0000000000000002:function(e){return e},__wbindgen_cast_0000000000000003:function(e){return e},__wbindgen_cast_0000000000000004:function(e,t){return l(e,t)},__wbindgen_cast_0000000000000005:function(e){return BigInt.asUintN(64,e)},__wbindgen_init_externref_table:function(){const e=r.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}}}}function de(s,e,t){r.wasm_bindgen__convert__closures_____invoke__heac90645160d4803(s,e,t)}function fe(s,e,t,n){r.wasm_bindgen__convert__closures_____invoke__hab1940d3e30575c2(s,e,t,n)}const V=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_announceerrormessage_free(s>>>0,1)),Q=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_announcemessage_free(s>>>0,1)),J=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_announceokmessage_free(s>>>0,1)),K=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_moqtclient_free(s>>>0,1)),X=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_serversetupmessage_free(s>>>0,1)),Y=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subgroupstate_free(s>>>0,1)),Z=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subgroupstreamobjectmessage_free(s>>>0,1)),ee=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribeannounceserrormessage_free(s>>>0,1)),te=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribeannouncesokmessage_free(s>>>0,1)),ne=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribedonemessage_free(s>>>0,1)),re=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribeerrormessage_free(s>>>0,1)),se=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribemessage_free(s>>>0,1)),_e=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>r.__wbg_subscribeokmessage_free(s>>>0,1));function m(s){const e=r.__externref_table_alloc();return r.__wbindgen_externrefs.set(e,s),e}const oe=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(s=>s.dtor(s.a,s.b));function D(s){const e=typeof s;if(e=="number"||e=="boolean"||s==null)return`${s}`;if(e=="string")return`"${s}"`;if(e=="symbol"){const _=s.description;return _==null?"Symbol":`Symbol(${_})`}if(e=="function"){const _=s.name;return typeof _=="string"&&_.length>0?`Function(${_})`:"Function"}if(Array.isArray(s)){const _=s.length;let o="[";_>0&&(o+=D(s[0]));for(let i=1;i<_;i++)o+=", "+D(s[i]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(s));let n;if(t&&t.length>1)n=t[1];else return toString.call(s);if(n=="Object")try{return"Object("+JSON.stringify(s)+")"}catch{return"Object"}return s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:n}function y(s,e){s=s>>>0;const t=b(),n=[];for(let _=s;_<s+4*e;_+=4)n.push(r.__wbindgen_externrefs.get(t.getUint32(_,!0)));return r.__externref_drop_slice(s,e),n}function we(s,e){return s=s>>>0,ie().subarray(s/8,s/8+e)}function L(s,e){return s=s>>>0,h().subarray(s/1,s/1+e)}let O=null;function ie(){return(O===null||O.byteLength===0)&&(O=new BigUint64Array(r.memory.buffer)),O}let w=null;function b(){return(w===null||w.buffer.detached===!0||w.buffer.detached===void 0&&w.buffer!==r.memory.buffer)&&(w=new DataView(r.memory.buffer)),w}function l(s,e){return s=s>>>0,ye(s,e)}let j=null;function h(){return(j===null||j.byteLength===0)&&(j=new Uint8Array(r.memory.buffer)),j}function f(s,e){try{return s.apply(this,e)}catch(t){const n=m(t);r.__wbindgen_exn_store(n)}}function d(s){return s==null}function pe(s,e,t,n){const _={a:s,b:e,cnt:1,dtor:t},o=(...i)=>{_.cnt++;const c=_.a;_.a=0;try{return n(c,_.b,...i)}finally{_.a=c,o._wbg_cb_unref()}};return o._wbg_cb_unref=()=>{--_.cnt===0&&(_.dtor(_.a,_.b),_.a=0,oe.unregister(_))},oe.register(o,_,_),o}function me(s,e){const t=e(s.length*8,8)>>>0;return ie().set(s,t/8),a=s.length,t}function E(s,e){const t=e(s.length*1,1)>>>0;return h().set(s,t/1),a=s.length,t}function p(s,e){const t=e(s.length*4,4)>>>0;for(let n=0;n<s.length;n++){const _=m(s[n]);b().setUint32(t+4*n,_,!0)}return a=s.length,t}function g(s,e,t){if(t===void 0){const c=F.encode(s),u=e(c.length,1)>>>0;return h().subarray(u,u+c.length).set(c),a=c.length,u}let n=s.length,_=e(n,1)>>>0;const o=h();let i=0;for(;i<n;i++){const c=s.charCodeAt(i);if(c>127)break;o[_+i]=c}if(i!==n){i!==0&&(s=s.slice(i)),_=t(_,n,n=i+s.length*3,1)>>>0;const c=h().subarray(_+i,_+n),u=F.encodeInto(s,c);i+=u.written,_=t(_,n,i,1)>>>0}return a=i,_}function B(s){const e=r.__wbindgen_externrefs.get(s);return r.__externref_table_dealloc(s),e}let x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});x.decode();const he=2146435072;let P=0;function ye(s,e){return P+=e,P>=he&&(x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),x.decode(),P=e),x.decode(h().subarray(s,s+e))}const F=new TextEncoder;"encodeInto"in F||(F.encodeInto=function(s,e){const t=F.encode(s);return e.set(t),{read:s.length,written:t.length}});let a=0,r;function Se(s,e){return r=s.exports,O=null,w=null,j=null,r.__wbindgen_start(),r}async function Oe(s,e){if(typeof Response=="function"&&s instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(s,e)}catch(_){if(s.ok&&t(s.type)&&s.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const n=await s.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(s,e);return n instanceof WebAssembly.Instance?{instance:n,module:s}:n}function t(n){switch(n){case"basic":case"cors":case"default":return!0}return!1}}async function je(s){if(r!==void 0)return r;s!==void 0&&(Object.getPrototypeOf(s)===Object.prototype?{module_or_path:s}=s:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),s===void 0&&(s=new URL("/moq-wasm/assets/moqt_client_wasm_bg-Bp1tHocv.wasm",import.meta.url));const e=le();(typeof s=="string"||typeof Request=="function"&&s instanceof Request||typeof URL=="function"&&s instanceof URL)&&(s=fetch(s));const{instance:t,module:n}=await Oe(await s,e);return Se(t)}class Fe{subgroupObjectHandlers=new Map;setSubgroupObjectHandler(e,t){this.subgroupObjectHandlers.set(e,t)}getSubgroupObjectHandler(e){return this.subgroupObjectHandlers.get(e)}deleteSubgroupObjectHandler(e){this.subgroupObjectHandlers.delete(e)}clearHandlers(){this.subgroupObjectHandlers.clear()}}class Ie{client=null;serverSetupResolve=null;onAnnounceHandler=null;onSubscribeResponseHandler=null;onConnectionClosedHandler=null;incomingSubscribeHandler=null;onServerSetupHandler=null;subscriptionState;constructor(e){this.subscriptionState=e??new Fe}async connect(e,t={}){if(!this.getConnectionStatus())try{if(await je(),this.client=new W(e),await this.client.start(),this.setupCallbacks(),t.sendSetup===!1){this.serverSetupResolve=null;return}const n=new Promise(i=>{this.serverSetupResolve=i}),_=t.versions??new BigUint64Array([0xff00000an]),o=t.maxSubscribeId??100n;await this.client.sendSetupMessage(_,o),await n}catch(n){throw this.cleanupClient(),console.error("Failed to connect MoQT client:",n),n}}async sendSetupMessage(e,t){const n=this.requireConnectedClient(),_=new Promise(o=>{this.serverSetupResolve=o});await n.sendSetupMessage(e,t),await _}async disconnect(){if(this.client)try{await this.client.close()}finally{this.cleanupClient()}}getConnectionStatus(){return!!this.client&&this.client.isConnected()}getRawClient(){return this.client}setOnConnectionClosedHandler(e){this.onConnectionClosedHandler=e}setOnServerSetupHandler(e){this.onServerSetupHandler=e}setOnAnnounceHandler(e){this.onAnnounceHandler=e}setOnSubscribeResponseHandler(e){this.onSubscribeResponseHandler=e}setOnIncomingSubscribeHandler(e){this.incomingSubscribeHandler=e}setOnSubgroupObjectHandler(e,t){this.subscriptionState.setSubgroupObjectHandler(e,t)}clearSubgroupObjectHandler(e){this.subscriptionState.deleteSubgroupObjectHandler(e)}clearSubgroupObjectHandlers(){this.subscriptionState.clearHandlers()}async announce(e,t){await this.requireConnectedClient().sendAnnounceMessage(e,t)}async subscribeAnnounces(e,t){await this.requireConnectedClient().sendSubscribeAnnouncesMessage(e,t)}async subscribe(e,t,n,_,o){const i=this.requireConnectedClient();if(i.isSubscribed(e))return;await i.sendSubscribeMessage(e,t,n,_,0,0,1,0n,0n,0n,o)}async unsubscribe(e){await this.requireConnectedClient().sendUnsubscribeMessage(e),this.clearSubgroupObjectHandler(e)}async sendSubgroupTextForTrack(e,t,n){const o=this.requireConnectedClient().getTrackSubscribers(e,t);if(!o.length){console.warn(`No subscribers registered for track ${e.join("/")}/${t}`);return}for(const i of o)await this.sendSubgroupTextForAlias(i,n)}setupCallbacks(){this.client&&(this.client.onSetup(e=>{this.serverSetupResolve&&(this.serverSetupResolve(),this.serverSetupResolve=null),this.onServerSetupHandler?.(e)}),this.client.onAnnounce(e=>{this.onAnnounceHandler?.(e)}),this.client.onAnnounceResponse(e=>{}),this.client.onSubscribe(async(e,t,n)=>{await(this.incomingSubscribeHandler??Ce)({subscribe:e,isSuccess:t,code:n,respondOk:(o,i,c)=>this.requireConnectedClient().sendSubscribeOkMessage(e.subscribeId,o,i,c),respondError:(o,i)=>this.requireConnectedClient().sendSubscribeErrorMessage(e.subscribeId,o,i)})}),this.client.onSubscribeResponse(e=>{this.onSubscribeResponseHandler?.(e)}),this.client.onSubscribeAnnouncesResponse(e=>{}),this.client.onSubgroupStreamHeader(e=>{}),this.client.onSubgroupStreamObject((e,t,n)=>{this.subscriptionState.getSubgroupObjectHandler(e)?.(t,n)}),this.client.onConnectionClosed(()=>this.handleConnectionClosed()))}async sendSubgroupTextForAlias(e,t){const n=this.requireConnectedClient(),_=n.getSubgroupState(e);_.headerSent||(await n.sendSubgroupStreamHeaderMessage(e,_.groupId,_.subgroupId,0),n.markSubgroupHeaderSent(e));const i=new TextEncoder().encode(t);await n.sendSubgroupStreamObject(e,_.groupId,_.subgroupId,_.objectId,void 0,i,void 0),n.incrementSubgroupObject(e)}handleConnectionClosed(){this.cleanupClient(),this.onConnectionClosedHandler?.()}cleanupClient(){this.client&&(this.client.free(),this.client=null),this.subscriptionState.clearHandlers(),this.serverSetupResolve=null}requireConnectedClient(){if(!this.client||!this.client.isConnected())throw new Error("MOQT client is not connected");return this.client}}const Ce=async s=>{if(s.isSuccess){await s.respondOk(0n,"secret","subgroup");return}await s.respondError(BigInt(s.code),"Subscription validation failed")};export{Ie as M,Ae as p};
