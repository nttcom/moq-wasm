<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MOQT Message Test</title>
    <script type="module" crossorigin src="/moq-wasm/assets/message-0c3bffc2.js"></script>
    <link rel="modulepreload" crossorigin href="/moq-wasm/assets/moqt_client_sample-098df381.js">
  </head>
  <body>
    <div id="app">
      <form name="form">
        <div>
          <h2>Connection</h2>
          <label for="url">URL:</label>
          <input type="url" name="url" id="url" value="https://moqt.research.skyway.io:4433" />
          <button type="button" id="connectBtn">Connect</button>
          <button type="button" id="closeBtn">Close</button>
        </div>
        <br />
        <div>
          <h2>Forwarding Preference</h2>
          <label
            ><input type="radio" name="forwarding-preference" id="selectDatagram" value="datagram" />Datagram
          </label>
          <label
            ><input type="radio" name="forwarding-preference" id="selectSubgroup" value="subgroup" checked />Subgroup
          </label>
          <br />
          *You must select at first
          <h2>Message</h2>
          <label>AuthInfo: <input type="text" name="auth-info" id="" value="secret" /> </label>
          <br />
          <h3>CLIENT_SETUP</h3>
          <label>Supported Version: <input type="text" name="versions" id="" value="0xff00000A" /></label>
          <br />
          Max Subscribe ID: <input type="text" name="max-subscribe-id" id="" value="1" />
          <br />
          <button type="button" id="sendSetupBtn">Send</button>

          <h3>ANNOUNCE</h3>
          <label
            >Track Namespace:
            <input type="text" name="announce-track-namespace" id="announce-track-namespace" value="vc/aa" />
          </label>
          <script>
            // Set default value for Track Namespace input
            ;(function () {
              function pad(n) {
                return n < 10 ? '0' + n : n
              }
              const now = new Date()
              const yyyy = now.getFullYear()
              const mm = pad(now.getMonth() + 1)
              const dd = pad(now.getDate())
              const HH = pad(now.getHours())
              const MM = pad(now.getMinutes())
              const value = `nttcom/${yyyy}${mm}${dd}/${HH}${MM}`
              const input = document.getElementById('announce-track-namespace')
              if (input) input.value = value
            })()
          </script>
          <br />
          <button type="button" id="sendAnnounceBtn">Send</button>

          <h3>SUBSCRIBE_ANNOUNCES</h3>
          <label
            >Track Namespace Prefix:
            <input type="text" name="track-namespace-prefix" id="track-namespace-prefix" value="vc" />
          </label>
          <script>
            // Set default value for Track Namespace input
            ;(function () {
              function pad(n) {
                return n < 10 ? '0' + n : n
              }
              const now = new Date()
              const yyyy = now.getFullYear()
              const mm = pad(now.getMonth() + 1)
              const dd = pad(now.getDate())
              const HH = pad(now.getHours())
              const MM = pad(now.getMinutes())
              const value = `nttcom/${yyyy}${mm}${dd}/${HH}${MM}`
              const input = document.getElementById('track-namespace-prefix')
              if (input) input.value = value
            })()
          </script>
          <br />
          <button type="button" id="sendSubscribeAnnouncesBtn">Send</button>

          <h3>SUBSCRIBE</h3>
          <label>Subscribe ID: <input type="text" name="subscribe-subscribe-id" id="" value="0" /> </label>
          <br />
          <label>Track Alias: <input type="text" name="subscribe-track-alias" id="" value="0" /> </label>
          <br />
          <label
            >Track Namespace:
            <input type="text" name="subscribe-track-namespace" id="subscribe-track-namespace" value="vc/aa" />
          </label>
          <script>
            // Set default value for Track Namespace input
            ;(function () {
              function pad(n) {
                return n < 10 ? '0' + n : n
              }
              const now = new Date()
              const yyyy = now.getFullYear()
              const mm = pad(now.getMonth() + 1)
              const dd = pad(now.getDate())
              const HH = pad(now.getHours())
              const MM = pad(now.getMinutes())
              const value = `nttcom/${yyyy}${mm}${dd}/${HH}${MM}`
              const input = document.getElementById('subscribe-track-namespace')
              if (input) input.value = value
            })()
          </script>
          <br />
          <label>Track Name: <input type="text" name="track-name" id="" value="vc_track" /> </label>
          <br />
          <br />
          <label>Subscriber Priority: <input type="text" name="subscriber-priority" id="" value="0" /> </label>
          <br />
          Group Order:
          <label><input type="radio" name="group-order" id="" value="0" checked />Original</label>
          <label><input type="radio" name="group-order" id="" value="1" />Ascending</label>
          <label><input type="radio" name="group-order" id="" value="2" />Descending</label>
          <br />
          <br />
          Filter Type:
          <label><input type="radio" name="filter-type" id="" value="1" checked />Latest Group</label>
          <label><input type="radio" name="filter-type" id="" value="2" />Latest Object</label>
          <label><input type="radio" name="filter-type" id="" value="3" />Absolute Start </label>
          <label><input type="radio" name="filter-type" id="" value="4" />Absolute Range</label>
          <br />
          Start Group: <input type="text" name="start-group" id="" value="0" /> Start Object:
          <input type="text" name="start-object" id="" value="0" />
          <br />
          End Group: <input type="text" name="end-group" id="" value="10000" /> End Object:
          <input type="text" name="end-object" id="" value="10000" />
          <br />
          <button type="button" id="sendSubscribeBtn">Send</button>

          <h3>UNSUBSCRIBE</h3>
          <label>SUBSCRIBE_ID: <input type="text" name="unsubscribe-subscribe-id" id="" value="0" /> </label>
          <br />
          <button type="button" id="sendUnsubscribeBtn">Send</button>

          <h3>OBJECT</h3>
          <div id="headerField" style="display: blocked">
            <h4>Header</h4>
          </div>
          <label>Track Alias: <input type="text" name="object-track-alias" id="" value="0" /> </label>
          <br />
          <div id="subgroupHeaderContents" style="display: blocked">
            Group ID:
            <p id="subgroupGroupId">0</p>
            <br />
            <button type="button" id="descendSubgroupGroupIdBtn">&lt;</button>
            <button type="button" id="ascendSubgroupGroupIdBtn">&gt;</button>
            <br />
            Subgroup ID:
            <p id="subgroupId">0</p>
            <br />
            <button type="button" id="descendSubgroupIdBtn">&lt;</button>
            <button type="button" id="ascendSubgroupIdBtn">&gt;</button>
            <br />
          </div>
          <label>Publisher Priority: <input type="text" name="publisher-priority" id="" value="0" /> </label>
          <br />
          <div id="objectField" style="display: blocked">
            <h4>Object</h4>
          </div>
          <div id="datagramObjectContents" style="display: none">
            Group ID:
            <p id="datagramGroupId">0</p>
            <br />
            <button type="button" id="descendDatagramGroupIdBtn">&lt;</button>
            <button type="button" id="ascendDatagramGroupIdBtn">&gt;</button>
            <br />
            <br />
          </div>
          Object ID:
          <p id="objectId">0</p>
          <br />
          <br />
          Object Status:
          <label><input type="radio" name="object-status" id="normal" value="0" checked />Normal</label>
          <label><input type="radio" name="object-status" id="does-not-exist" value="1" />DoesNotExist</label>
          <label><input type="radio" name="object-status" id="end-of-group" value="3" />EndOfGroup</label>
          <label
            ><input type="radio" name="object-status" id="end-of-track-and-group" value="4" />EndOfTrackAndGroup</label
          >
          <label><input type="radio" name="object-status" id="end-of-track" value="5" />EndOfTrack</label>
          <br />
          <br />
          <label>Payload: <br /><textarea name="payload" id="object-payload" rows="5" cols="33">test</textarea></label>
          <br />
          <div id="sendDatagramObject" style="display: none">
            <button type="button" id="sendDatagramObjectBtn">Send with Payload</button>
          </div>
          <div id="sendDatagramObjectWithStatus" style="display: none">
            <button type="button" id="sendDatagramObjectWithStatusBtn">Send with Status</button>
          </div>
          <div id="sendSubgroupObject" style="display: blocked">
            <button type="button" id="sendSubgroupObjectBtn">Send with Payload</button>
          </div>
          <div id="sendSubgroupObjectWithStatus" style="display: blocked">
            <button type="button" id="sendSubgroupObjectWithStatusBtn">Send with Status</button>
          </div>
        </div>
        <br />
        <div>
          <h2>Received</h2>
          <div id="received-text"></div>
        </div>
      </form>
    </div>

    
  </body>
  <style>
    p {
      display: inline;
    }
  </style>
</html>
